apiVersion: policy/v1
kind: PodDisruptionBudget
metadata:
  name: auth-service-pdb
  namespace: paystream
  labels:
    app.kubernetes.io/name: auth-service
    app.kubernetes.io/component: authorization
    app.kubernetes.io/part-of: paystream
spec:
  # Allow at most 1 replica to be unavailable during voluntary disruptions.
  # Preferred over minAvailable during canary rollouts where replica count
  # varies between stable and canary ReplicaSets.
  maxUnavailable: 1
  selector:
    matchLabels:
      app: auth-service
